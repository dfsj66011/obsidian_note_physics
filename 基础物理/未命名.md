
如下所示，一个奇怪的式子，求解 $x$ 的值：
$$x^{x^{x^{x^{x 
^{\,..\,\,^{\,..\,\,^{\,..\,\,}}}}}}}= 2$$

这是个在抖音里经常能看到这个题目，大概是这个式子特别奇怪，比较吸引人，而且这个式子并不容易以常规思路求解，且由于涉及到无限指数，会有一些反直觉的内容。如果你也在抖音刷到该题目，我想大概千篇一律的解法是将所有的指数部分认为等同于原式，因此可以化简为 $x^2=2$，进而求解得到 $x=\sqrt{ 2 }$ 或者 $x=\pm \sqrt{ 2 }$。

这其中不乏一些做科普的教师，甚至将其列为初中解题技巧，简直是误人子弟，且不说这个题目远超普通高等数学知识范围，单看这个解题技巧以及解题结果也是经不起推敲的，存在很多问题。

在进一步介绍之前，先说这个题目的答案，$\sqrt{ 2 }$ 是正确的，但前提是我们假设这里的 $x>0$，因为负数的实数次幂并不一定是实数，比如我们可以利用欧拉公式和对数形式，将 $a^b$ 改写为 $a^b=e^{b\cdot \ln(a)}$，如果 $a<0$，$\ln(a)$ 是复数，这超出了我们一般的讨论范围。

因此单从结果上看，针对这个题目，粗略的将所有指数部分视为原式，即 $x^2=2$，从而求出 $x=\sqrt{ 2 }$ 是可以算求解正确的，但最多只能给 60 分。

------------

### 工具实验

我们把上面的过程形式化的重新整理一遍，即有一个表达式如下所示：$$y=f(x)=x^{x^{x^{x^{x 
^{\,..\,\,^{\,..\,\,^{\,..\,\,}}}}}}}$$其中，指数部分犹如高塔，是无限高度的。此外，我们假定这里的 $x>0, y>0$。

此外我们需要说明一下，这里的计算逻辑，举个例子，$3^{3^3}$，这个东西怎么算？错误的计算逻辑是先算底层的 $3^3$，再算结果的 $(3^3)^3$，结果是 $3^9$，正确的计算逻辑是从最高层往下算，即 $3^{27}$。所以直觉上，左侧这个表达式会爆炸式增长，例如，以 $x=3$ 为例，如果算到 4 层 $3^{3^{3^3}}=3^{7625597484987}$，爆炸速度非常恐怖，但有些数就不会爆炸增长，至少对 $x=1$ 来说就不会。

上述解题思路可以描述为：由于指数序列是无限的，在一个无限序列中添加（或移除）一个元素不应改变其整体效果（就像在无限数上加减一个有限数一样）。

$$y=\sqrt 2^{\left\{ {\sqrt 2^{\sqrt 2^{\sqrt 2^{\sqrt 2^{\sqrt 2 
^{...}}}}}} \right\}=y}\to y=\left( {\sqrt 2 } \right)^{y}\to y^{1 
\mathord{\left/ {\vphantom {1 y}} \right. } 
y}=\sqrt 2 =2^{1 \mathord{\left/ {\vphantom {1 2}} \right. } 2}\to y=2$$

此外，如果该解题思路有效，是否意味着，如果 $f(x)=3$，进而有 $x^3=3$，求解得到 $x=\sqrt[3]{ 3 }$ ？或许你可能猜测是的，但很快就会出现矛盾，例如如果 $f(x)=4$，进而有 $x^4=4$，求解得到 $x=\sqrt[4]{ 4 }$，4 开 4 次根方，可以等同于先开 2 次根方，再开 2 次根方，即 $\sqrt[4]{ 4 }=\sqrt{ 2 }$，那么问题来了，当 $x=\sqrt{ 2 }$ 时，右侧到底是 2 还是 4。

$$\sqrt 2^{\sqrt 2^{\sqrt 2^{\sqrt 2^{\sqrt 2 
^{\,..\,\,^{\,..\,\,^{\,..\,\,}}}}}}}=\sqrt[4]{4}^{\sqrt[4]{4}^{\sqrt[4]{4}^{\sqrt[4]{4}^{\sqrt[4]{4}^{\,..\,\,^{\,..\,\,^{\,..\,\,}}}}}}}\to 
2?\,\,\,4?$$

检查结果最直接的方式是将答案带入进去，但由于这里存在较多的根式以及大量的指数运算，远超出普通计算器的计算范围，实际上需要借助一些编程手段或者专用计算工具，在合理的计算范围内快速检验一下。

<div style="display: flex;">
  <img src="1.gif" style="width: 50%;">
  <img src="2.gif" style="width: 50%;">
</div>

我们可以在 $a=\sqrt[3]{3  }$ 的基础上微调，适当调大一点点，关于 $b$ 是否还会继续收敛到一个固定值或者迅速爆炸到无穷大。实验观察发现，$a$ 的边界大概在 $a=1.4446678$ 左右，$b=2.1716979$，虽然 $a$ 这个值并不直观，但 $b$ 的这个极限值是不是似曾相识，自然底数 $e=2.718281828459$，因此考虑到计算以及工具自身表达的数字精度问题，我们可以自信的猜测，要想该表达式有合理的极限值，表达式左侧 $x$ 是有右边界的，即 $0<x<1.4446678$，而此时右侧极限值为 $e$，这也就是为什么如果表达式右侧为 3，我们是求不出这样的 $x$ 的。

那 $x$ 是否存在左边界呢？是不是任意小数都可以？实验发现，大概在 $a$ 大概在 0.06 左右

<div style="display: flex;">
  <img src="3.gif" style="width: 50%;">
  <img src="4.gif" style="width: 50%;">
</div>

而且有意思的是，如果你仔细发现其实在 0.06 左侧，貌似随着 $n$ 的变大 $b$ 在两个值上不断切换，就好像它随着塔高的奇偶变换，收敛到两个不同的值。

事情到这里，你应该意识到，这并不是一个简单的问题，里面貌似还存在非常奇怪的一些现象，而它的一些边界又似乎与 $e$ 这个数字存在某种联系。而事实上，上面出现的所有这些数字的确都与 $e$ 相关

$$e \approx 2.71828，e^{\frac{1}{e} }\approx 1.44467, \frac{1}{e} \approx 0.367879, e^{-e} \approx 0.065988$$

-------

### 反函数作图

通过利用计算工具进行的实验，我们大概已经对该表达式有一些初步的了解，问题的关键是，$x$ 在某个范围内是急速爆炸而不可能收敛到一个有限的值，例如 $x>e$，而在某个范围可以收敛到某个有限制，而又在一些特别小的数上出现了神奇的奇偶交替收敛到不同的值，或许在其他未详尽测试的范围中可能还有更奇怪的现象？

也就是说我们要对其进行收敛性测试，什么区间可以收敛，什么区间发散，收敛貌似有可能是收敛到一个值，也可能收敛到多个值，乱糟糟的样子。

所谓的收敛是什么意思？通俗点说，就是当某一刻，例如我们测试中指定塔高为 1000，得到一个值，那么在此基础上继续增加塔高，比如 1001, 1002，$b$ 的值都固定不动了，那就是收敛。因此如果我们将每一级塔高得出的值，依次排列，就会得到一个数列 $\left\{ {y_{1} ,\,\,y_{2} ,\,\,y_{3} ,\,\,y_{4} ,...,\,\,y_{n} ,...} \right\}$，那么原来的表达式就可以表示成
$$y=f(x)=x^{x^{x^{x^{{\mathinner{\mkern2mu\raise1pt\hbox{.}\mkern2mu 
\raise4pt\hbox{.}\mkern2mu\raise7pt\hbox{.}\mkern1mu}}}}}}=\lim\limits_{n\to \infty } f_{n} \left( x \right)$$
这里的 $n$ 是指塔高。显然这个序列是递归迭代构造的，换个写法，可以表示为：$$\left\{ {{\begin{array}{*{20}c}
 {y_{1} =x} \\
 {y_{n+1} =x^{y_{n} }} \\
\end{array} }} \right.	f\left( x \right)=\lim\limits_{n\to \infty } y_{n}$$
例如：$$
\begin{array}{l}
 y_{1} =x \\ 
 y_{2} =x^{y_{1} }=x^{x} \\ 
 y_{3} =x^{y_{2} }=x^{x^{x}} \\ 
 ... \\ 
 \end{array}$$
现在我们 *假设它的确收敛于某个具体的有限值*，有了该假设以后，我们才可以运用文章开篇介绍的技巧，

$$y=x^{\left\{ 
{x^{x^{x^{x^{{\mathinner{\mkern2mu\raise1pt\hbox{.}\mkern2mu 
\raise4pt\hbox{.}\mkern2mu\raise7pt\hbox{.}\mkern1mu}}}}}}} \right\}=y}\to 
y=x^{y}$$

形如 $y=x^y$ 的表达式，显然很难处理，但这个东西如果取逆函数，我们有$$x=g\left( y \right)=y^{1 \mathord{\left/ {\vphantom {1 y}} \right.} y}  \;\;\; (g=f^{-1})$$
这个看起来就好多了，这是一个定义良好的函数，因为它可以进一步转化为 $x=e^{\frac{1}{y} \ln y}$（因为任意数 $a=e^{\ln a}$）

这个逆函数长什么样子呢？有了逆函数，我们对角线翻转一下就得到原表达式的图像，就可以结合图像有显式的了解。

--------------

**任务：** 画出函数 $x=y^{1/y}=e^{\frac{1}{y} \ln y}$ 的函数曲线，如果你觉得别扭，你可以对调字母 $y=x^{1/x}$ 也行，关键是知道这是原表达式的逆函数。

这应该是高中或者大学阶段微积分、函数等知识体系下非常基本的操作，大概来讲有如下这些步骤：

* 判断对称性、$x, y$ 轴上的截距、定义域
* 垂直渐近线、水平渐近线
* 一阶导用于找极值点
* 二阶导用于判定拐点，曲线凹凸性

**第一步：** 由于限定了 $y>0$，以及指数函数形式，所以对称性、求截距等步骤可以跳过，都不存在。

**第二步**：求渐近线，两个点，一个是 $y \to 0^+$，一个是 $y \to +\infty$，我们主要看指数部分 $\frac{1}{y} \ln y$，当  $y \to 0^+$ 时，$\frac{1}{y} \ln y \to -\infty$，$x \to 0$；当 $y \to +\infty$ 时，$\frac{1}{y} \ln y \to 0$，$x \to 1$，因此有水平渐近线 $x=1$

**第三步：** 求一阶导 $\frac{\mathrm{d}x}{\mathrm{d}y}=0$

$$\frac{\mathrm{d}x}{\mathrm{d}y}=e^{\frac{1}{y} \ln y}\cdot \left( \frac{1-\ln y}{y^2} \right)=0$$

显然，第二项的分子 $1-\ln y=0$，$y=e$，$x=e^{1/e}$，就这一个极值点，当 $y<e$，显然 $1-\ln y>0$，一阶导整体 $>0$，函数上升，反之 $y>e$，导数 $<0$，左升右降，这是最大值点。

**第四步：** 求二阶导 $\frac{\mathrm{d}^2x}{\mathrm{d}y^2}=0$，

$$\frac{\mathrm{d}^2x}{\mathrm{d}y^2}=e^{\frac{1}{y} \ln y}\cdot \left( \frac{1-\ln y}{y^2} \right)^2+e^{\frac{1}{y} \ln y}\left( \frac{y^{2}\left( -\frac{1}{y} \right)-(1-\ln y)\cdot2y}{y^4} \right)=0$$
约掉 $e^{\frac{1}{y} \ln y}$，分母都是 $y^4$ 也可忽略，分子部分，第一项为 $1-2\ln y+(\ln y)^2-y-2y+2y\ln y$，这里一下有 $1-3y+\ln y \cdot(2y+\ln y-2)=0$，这个不容易求解，可借助作图

```python
import numpy as np
import matplotlib.pyplot as plt

def equation(y):
    return 1 - 3*y + np.log(y) * (2*y + np.log(y) - 2)

y_values = np.linspace(0.1, 10, 400)
f_values = equation(y_values)

plt.plot(y_values, f_values, label='f(y)')
plt.axhline(0, color='red', linestyle='--')
plt.xlabel('y')
plt.ylabel('f(y)')
plt.title('Function Plot')
plt.legend()
plt.grid(True)
plt.show()
```

![[1.png|300]]

大概解释下这段代码，`np.linspace(0.1, 10, 400)` 就是在 0.1-10 范围内均匀取 400 个点，然后分别计算它们的值，最后平滑连线，看起来有两个零点值，分别在 0.5 和 4.5 左右。

```python
import numpy as np
from scipy.optimize import fsolve

def equation(y):
    return 1 - 3*y + np.log(y) * (2*y + np.log(y) - 2)

initial_guess_1 = 0.5
initial_guess_2 = 4.5

solution_1 = fsolve(equation, initial_guess_1)
solution_2 = fsolve(equation, initial_guess_2)

print("解为:", solution_1[0], solution_2[0])

```

解为: 0.5819327056085922 4.367770967056044

此外，根据函数图像，在 0-0.58 区间内，二阶导 $>0$，凸函数（碗口朝上），0.58-4.37 区间，二阶导 $<0$，凹函数（碗口朝下），4.37 以后，凸函数（碗口朝上）

如此，基本上可以手绘该函数的图像了，不过我们还是借助软件给出更加精细的图像。


![[6.png|600]]

注：关注蓝色曲线时，图中横轴充当 $y$ 轴，纵轴充当 $x$ 轴；当观察橙色曲线时，横轴充当 $x$ 轴

图中蓝色曲线就是我们求解的逆函数图像，当 $y=e$ 时有最大值 $e^{1/e}$，蓝色曲线右侧接近水平渐近线 $x=1$；而对应的橙色曲线，则是原始表达式的图像，<font color="red">显然，它不是函数</font>。因为在 $1<x<e$ 区间内，同一个 $x$ 会有两个不同的 $y$ 值。

### 图像分析

粗略的从橙色曲线上看，首先当 $x>e^{1/e}$，也就是大概在 1.44 的位置右侧，是没有曲线图的，也就说明是没有这样的值的，函数曲线不可能达到那个区域，表达式是不可能收敛的。而在 $x=e^{1/e}$ 时，收敛到 $y=e$；而在 $1<x<e^{1/e}$，有两个值，而在 $0<x<1$ 或者至少在稍微大于 0 一些的地方到 1 之间，看起来也只会收敛到一个值，而特别靠近 0 的地方，还不太十分清晰，看起来那里是一条垂线一样。

这结合我们此前的工具实验，在一些数值上更加精确了一些。但还是没有彻底了解它的全部。
 
--------

### 收敛问题

接下来，需要上强度了，首先是，收敛意味着什么？在前面，我们把问题形式改写为：
$$\left\{ {{\begin{array}{*{20}c}
 {y_{1} =x} \\
 {y_{n+1} =x^{y_{n} }} \\
\end{array} }} \right.	\quad f\left( x \right)=\lim\limits_{n\to \infty } y_{n}$$

因此，如果序列 $\left \{ y_{n} \right\}$ 收敛，则么对于给定的某个 $x$ 值，只要随着 $n$ 的增加，它会稳定到某个有限值。换句话说，应该有 $\lim\limits_{n\to \infty } y_{n+1} =y_{n}$ 或者 $\lim\limits_{n\to \infty } y_{n+1} -y_{n} =0$

*从这里开始，我们暂时先不再考虑原始问题，* 而是针对收敛问题做一般性分析，何时序列必然收敛于一个确定的点。所以接下来我们考虑一个更一般的通用性问题，给定初始值 $y_{1}$ 以及一个递归公式 $y_{n+1} =r\left( {y_{n} } \right)$，这里的 $r$ 是个平滑函数，那么我们称这个确定的点 $y^\star$ 为不动点，这意味着如果从某一刻 $y_{n} =y^{\ast }$，那么 $y_{n+1} =r\left( {y_{n} } \right)=r\left( {y^{\ast }} \right)=y^{\ast }$，并且序列将在所有后续迭代中不断重复相同的值。

接下来需要分析这个不动点是不是稳定的，如果不动点是稳定的，那么当我们从靠近它的地方开始时，最终会离它更近。用数学术语来说，我们可以设 $\delta_{n}$ 为 $y^{\ast }$ 与 $y_{n}$ 之间的距离（$\delta_{n} >0$），并从点 $y_{n} =y^{\ast }\pm \delta_{n}$ ​开始，下一个项将是 $y_{n+1} =y^{\ast }\pm \delta_{n+1}$，收敛的要求是对于所有 $n$ 有 $\delta_{n+1} <\delta_{n}$。因为 $\delta_{n+1} =\left| {y_{n+1} -y^{\ast }} \right|=\left| {r\left( {y_{n} } \right)-r\left( {y^{\ast }} \right)} \right|$ 以及 $\delta_{n} =\left| {y_{n} -y^{\ast }} \right|$

所以我们有：$$
\frac{\delta_{n+1} }{\delta_{n} }=\frac{\left| {r\left( {y_{n} } 
\right)-r\left( {y^{\ast }} \right)} \right|}{\left| {y_{n} -y^{\ast }} 
\right|}$$
我们越接近 $y^{\ast }$，上述比率就越接近于导数 $\left| {{r}'\left( {y^{\ast }} \right)} \right|$ 的绝对值。这表明可以利用中值定理来表述存在一个点 $\xi \in \left( {y_{n} ,y^{\ast }} \right)$，使得

$$\left| 
{{r}'\left( \xi \right)} \right|=\frac{\left| {r\left( {y_{n} } 
\right)-r\left( {y^{\ast }} \right)} \right|}{\left| {y_{n} -y^{\ast }} 
\right|}=\frac{\delta_{n+1} }{\delta_{n} }$$

那么，如果在某个区间内，对于所有满足 $\left| {y^{\ast }-y} \right|<\delta_{n}$ 的 $y$，都有 $\left| {{r}'\left( y \right)} \right|<k<1$，那么同样会有$$
\frac{\delta_{n+1} }{\delta_{n} }=\left| {{r}'\left( \xi \right)} 
\right|<k$$
即：$$\left| {r\left( {y_{n} } \right)-r\left( {y^{\ast }} \right)} 
\right|<k\left| {y_{n} -y^{\ast }} \right|$$
如此有：$$\left| {y_{n+1} -y^{\ast }} \right|<k\left| {y_{n} -y^{\ast }} \right|,
\quad
\left| {y_{n+2} -y^{\ast }} \right|<k\left| {y_{n+1} -y^{\ast }} 
\right|<k^{2}\left| {y_{n} -y^{\ast }} \right| \quad \cdots$$
随后我们发现，如果在 $y^{\ast }$ 的某个邻域内 $\left| {{r}'\left( y \right)} \right|<1$，并且递归序列的起始点也位于该邻域内，那么随着 $n$ 的增加，到不动点的距离会越来越小，最终有 $\lim\limits_{n\to \infty } {\kern 1pt}\delta_{n} =0$，这意味着 $\lim\limits_{n\to \infty } {\kern 1pt}y_{n} =y^{\ast }$.。

我们整理一下上面的这段分析讨论内容：

如果有：

1. $r\left( y \right)$ 和  $r'\left( y \right)$ 在区间 $\left[ {a,b} \right]$ 上是连续的；
2. 如果 $a\le y\le b\,\,\,\,\to \,\,\,\,a\le r\left( y \right)\le b$ （这意味着 $r(y)$ 是一个压缩映射）
3. $\lambda =\mathop {\max }\limits_{a\le y\le b} \left| r'\left( y \right) \right|<1$ 

那么有：

1. 存在一个唯一解 $y^{\ast }\in \left[ {a,b} \right]$ 满足方程 $y=r\left( y \right)$. 
2. 对于任意起始点 $y_{0} \in \left[ {a,b} \right]$，序列都将收敛到唯一的不动点：$\lim\limits_{n\to \infty } y_{n} =y^{\ast }$ 

不动点的收敛/发散特性可以通过所谓的“蛛网”构造进行图形化解释。

在下图中，我们绘制了递归方程 $y_{n+1} =r\left( {y_{n} } \right)$ 的函数关系图，其中 $y_{n+1}$ ​作为 $y_{n}$ ​的函数。不动点是函数 $r\left( {y_{n} } \right)$ 与直线 $y_{n+1} =y_{n}$ 的交点。此处有两个标记为 $P_{1}$ ​和 $P_{2}$ ​的不动点。蛛网图显示 $P_{1}$ 是吸引性（稳定）不动点，而 $P_{2}$ ​是排斥性（不稳定）不动点。这是因为 $\left| {{r}'\left( {y_{P_{1} } } \right)} \right|<1$ 而 $\left| {{r}'\left( {y_{P_{2} } } \right)} \right|>1$。

![[7.png|400]]

(这个图怎么看？蓝色的线表示我们的递归方程 $y_{n+1} =r\left( {y_{n} } \right)$，由于我们主要研究是指数幂塔问题，所以蓝色的线是某指数函数图像，横轴表示的是 $y_{n}$，纵轴表示的是 $y_{n+1}$，而我们期望找到点一定符合 $y_{n+1}=y_{n}$，也就是该点一定在图中的灰色虚线上，因为这条线表示的就是 $y_{n+1}=y_{n}$，以黑色实线为例，假如初始点，我们选择是图中这个黑色的 $y_{n}$，经过 $r(y_{n})$ 我们得到一个输出（第一个绿色箭头），即黑色的这个 $y_{n+1}$，然后把这个值作为新的输入（第二个绿色箭头），再次计算出一个新的输出（第三个绿色箭头），如此反复，最后你会发现它收敛于 $P_{1}$ 点，反之，如果初始选择的红色的 $y_{n}$，则越走越远，发散的更厉害，因此 $P_{1}$ 是稳定的不动点，因为此处的斜率小于 1，而 $P_{2}$ 是不稳定的，因为此处斜率大于 1)


-----

#### 原始问题的收敛区间

本文所讨论的案例中，我们关注的是函数序列的收敛性。$$y_{n+1} =x^{y_{n} }.$$
这里的变量 $x$ 应被视为递归方程的参数，其变量为项 $y_{n}$ 和 $y_{n+1}$。实际上，我们有无限多个序列，每个 $x$ 值对应一个序列。这些序列的不动点 $\left( {y^{\ast }} \right)$ 是指那些满足 $y_{n+1} =y_{n}$ ​的点，即满足该方程的点。
$$y=x^{y}$$
利用不动点收敛准则，我们必须找到 $y$（以及 $x$）的区间，使得 $x^y$ 的一阶导数的模小于 1，即$$\left| {\frac{\mathrm{d}}{\mathrm{d}y}\left( {x^{y}} \right)} \right|<1$$为此，使用等价方程 $x^{y}=e^{\ln x^{y}}=e^{y\ln x}$ 是很方便的，计算以下关于 $y$ 的导数：$$
\frac{\mathrm{d}}{\mathrm{d}y}\left( {e^{y\ln x}} \right)=e^{y\ln x}\cdot \ln x=x^{y}\cdot \ln x=y\cdot \ln x=\ln x^{y}=\ln y$$
所以为了保证收敛，必须要有 $\left| {\ln y} \right|<1$, 即

$$-1<\ln y<1	\to 	1 \mathord{\left/ {\vphantom {1 e}} \right.} e<y<e$$

$x$ 对应的值（因为 $x=y^{1 \mathord{\left/ {\vphantom {1 y}} \right. } y}$）即为 $e^{-e}$ 和 $e^{1 \mathord{\left/ {\vphantom {1 e}} \right. } e}$。

*至此，我们证明了原表达式收敛的范围，这也是开篇我们给出的结论。*

--------

#### 从图形角度的解释

为了更深入地理解之前结果的实际含义，我们现在转向另一种更具视觉元素的路径。

在序列 $y_{n+1} =x^{y_{n} }$ 的情况下，我们可以看到递归方程是一族指数曲线（将 $x$ 视为参数），寻找可能的不动点及其稳定性的过程相当简化，主要是因为除了 $x=1$ 的平凡情况外，这些函数都是严格单调的。

为了简化符号表示，我们将变量重命名如下：$$
y_{n+1} =z,
\quad
y_{n} =y$$
然后，我们想研究指数函数族 $z=x^{y}$ (其中基数 $x$ 可视为参数)。指数函数的特性由其底数 $x$ 的值决定。

* $x>1:$ 指数在增长；
* $x=1:$  $y=1^{1^{1^{{\mathinner{\mkern2mu\raise1pt\hbox{.}\mkern2mu \raise4pt\hbox{.}\mkern2mu\raise7pt\hbox{.}\mkern1mu}}}}}=1$，不怎么有趣；
* $x<1:$ 指数在下降；

递归函数 $z=x^{y}$ 所定义的曲线相对于恒等线 $z=y$ 的位置，使我们能够确定不动点存在的可能性。

因此接下来，我们挨个分析一下，$z=y$ 实际上就是指输入等于输出，图像上就是 $y=x$ 这条 45° 的直线，也就是说，我们要判定指数图像与这个条直线相交的情况。

当 $x>1$ 时，根据指数曲线的走势，与 $z=y$ 是否相交有 3 种情况，如下如所示：

![[8.png|500]]

分别为：不存在不动点；有一个不动点；有两个不动点。但什么时候没有，有一个或者两个，需要进一步分析。

而当 $x<1$ 时，显然总会保证有且仅有一个不动点，但我们稍微区分一下不动点处的导数大小。

![[Pasted image 20250901115509.png|400]]
其中左侧这里 $-1 \le \frac{\mathrm{d}}{\mathrm{d}y}\left( {x^{y}} \right)\le 0$；右侧这里 $\frac{\mathrm{d}}{\mathrm{d}y}\left( {x^{y}} \right)<-1$ ，同理什么时候图像是左边这样或者右边这样，也需要进一步分析。

也就是说，除了 $x=1$ 这个无聊的特殊情况，我们总共有 5 种需要分析的可能性。

#### 情况一、二、三：$x>1$

我们先考虑一个比较简单的情况，$x>1$，且图像与 $z=y$ 直线相切，图例如下所示：

![[Pasted image 20250901173103.png|300]]

在这种情况下，切点处的斜率就是直线 $z=y$ 的斜率，是 1，所以有

$$z'\left( y \right)=\frac{\mathrm{d}}{\mathrm{d}y}\left( {x^{y}} \right)=\frac{\mathrm{d}}{\mathrm{d}y}\left( 
{e^{y\ln x}} \right)=e^{y\ln x}\cdot \ln x=x^{y}\cdot \ln x=1\to y_{T} =\log 
_{x} \left( {\frac{1}{\ln x}} \right)=-\frac{\ln \ln x}{\ln x}
$$
从而有：$$
z_{T} =x^{y_{T} }=x^{\log_{x} \left( {1 \mathord{\left/ {\vphantom {1 {\ln 
x}}} \right.  } {\ln x}} \right)}=\frac{1}{\ln x}
$$
因此我们找到了点 $T\left( {-\frac{\ln \ln x}{\ln x},\frac{1}{\ln x}} \right)$，$z'\left( y \right)=1$。由于这个点同时在直线 $z=y$ 上，因此要求有：

$$y_{T} =z_{T} \to -\frac{\ln \ln x}{\ln x}=\frac{1}{\ln x}\to \ln \ln x=-1\to 
\ln x=e^{-1}\to x=e^{1 \mathord{\left/ {\vphantom {1 e}} \right. 
 } e}\approx 1.445.$$

根据这个值，指数函数变为 $z=\left( {e^{1 \mathord{\left/ {\vphantom {1 e}} \right. } e}} \right)^{y}$，切点为 $T\left( {e,e} \right)$。

因此，我们现在知道了：

* 如果 $x>e^{1 \mathord{\left/ {\vphantom {1 e}} \right. } e}$ ，则没有交点（递归序列也没有不动点），这时候图像符合第一个图的样子
* $x=e^{1 \mathord{\left/ {\vphantom {1 e}} \right. } e}$ 这个就是刚才分析的情况，只有一个不动点
* 显然如果 $1<x<e^{1 \mathord{\left/ {\vphantom {1 e}} \right.} e}$ 那就会有两个不动点，图像符合第三个图的样子

##### 情况一、二、三 的不动点稳定性分析

**首先是情况一：$x>e^{1 \mathord{\left/ {\vphantom {1 e}} \right. } e}$**

![[Pasted image 20250901180456.png|250]]

显然不存在不动点，无论从哪个起点开始，序列都必然会发散到无穷大。

其次是情况二：$x=e^{1 \mathord{\left/ {\vphantom {1 e}} \right. } e}$

![[Pasted image 20250901181711.png|250]]

这得看你从哪里开始了，如果在 $P_{1}$ 左侧，那就会收敛于 $P_{1} \quad \left( {e,e} \right)$，如果在右侧，那就会发散出去，可以说 $P_1$ 是一个"半稳定"的不动点。但就幂塔序列而言，其初始值 $y_{0} =x=e^{1 \mathord{\left/{\vphantom {1 e}} \right. } e}$ 位于 $P_1(e,e)$ 点左侧，因此该序列会收敛于 $y^{\ast }=e$。

接下来是情况三：$1<x<e^{1 \mathord{\left/ {\vphantom {1 e}} \right. } e}$

![[Pasted image 20250901182204.png|450]]

单纯从这个图上看，相比你应该也会分析了，其中 $P_{1}$ 是稳定的不动点，而 $P_{2}$ 是不稳定的。

具体来说，对于任何起始点 $y_{0} <y^{\ast }_{2}$，序列将收敛于 $y^{\ast }_{1}$；而对于 $y_{0} >y^{\ast }_{2}$，序列将发散至无穷大。无论如何，对于幂塔序列而言，起始值 $y_{0} =x$ 位于 $y^{\ast }_{1}$ 的左侧，为什么？

事实上，对于不动点存在关系式 $y^{\ast }_{1} =x^{y^{\ast }_{1} }\to x=\left( {y^{\ast }_{1} } \right)^{1 \mathord{\left/ {\vphantom {1 {y^{\ast }_{1} }}} \right. } {y^{\ast }_{1} }}$ ，如果我们设 $x<y^{\ast }_{1}$。则必有 $\left({y^{\ast }_{1} } \right)^{1 \mathord{\left/ {\vphantom {1 {y^{\ast }_{1} }}} \right. }{y^{\ast }_{1} }}<y^{\ast }_{1}$。对两边取对数可得 $\ln \left( {y^{\ast }_{1} } \right)^{1 \mathord{\left/ {\vphantom {1 {y^{\ast }_{1} }}} \right. } {y^{\ast }_{1} }}<\ln y^{\ast }_{1}$，即 $1 \mathord{\left/ {\vphantom {1 {y^{\ast }_{1} }}} \right. } {y^{\ast }_{1} }\ln \left( {y^{\ast }_{1} } \right)<\ln y^{\ast }_{1} \to 1 \mathord{\left/ {\vphantom {1 {y^{\ast }_{1} }}} \right. } {y^{\ast }_{1} }<1\to y^{\ast }_{1} >1$.（因为此处假定的是 $1<x<y^{\ast }_{1}$）。

因此，如果 $y^{\ast }_{1} >1$，则有 $x<y^{\ast }_{1}$。但由于 $z=x^{y}$ 是递增的，且 $z\left( 0 \right)=1$，指数函数与直线 $z=y$ 的第一个交点处的值必须有 $z>1$。这意味着（因为 $y=z$）$y>1$。因此 $y^{\ast }_{1} >1$，且 $x<y^{\ast }_{1}$。该序列收敛于 $y^{\ast }_{1}$。

##### 情况四、五的不动点稳定性分析

在这两种情况下，$0<x<1$，指数曲线 $z=x^{y}$ 是递减的，与直线 $z=y$ 有且仅有一个交点，正如我们开篇通过实验观察的那样，当我们开始分析这个固定点的稳定性以及序列最终向它收敛的情况时，会发生一些有趣且出乎意料的事情。

![[Pasted image 20250902110139.png|500]]

针对这种情况，以上两幅图展示了两种不同的蛛网迭代过程，产生了截然不同的结果。当一阶导数满足 $\left| {z'\left( {y^{\ast }_{1} } \right)} \right|<1$（即 $-1 \le z'\left( {y^{\ast }_{1} } \right)<0$，作图所示）时，迭代会收敛至 $y^{\ast }_{1}$，并在不动点值的上下交替振荡，但逐步向不动点逼近。可以说该不动点是稳定的，无论初始点如何选择，序列最终都会收敛于此。

相反，如果一阶导数为 $\left| {z'\left( {y^{\ast }_{1} } \right)} \right|>1$（即 $z'\left( {y^{\ast }_{1} } \right)<-1$，右图所示），迭代过程仍会振荡，但序列不会收敛于 $y^{\ast }_{1}$。相反，它会趋于一个周期性稳定循环，逐渐逼近两个交替出现的不同固定值。

那么让我们看看 $x$ 取何值时我们有 $z'\left( {y^{\ast }_{1} } \right)>-1$。既然我们已经发现 $z'\left( {y^{\ast }_{1} } \right)=x^{y}\ln x$，我们必须解不等式 $x^{y}\ln x>-1$，因为 $y=x^{y}$，这意味着 $x=y^{1 \mathord{\left/ {\vphantom {1 y}} \right. } y}$。那么将会有

$$
y\ln y^{1 \mathord{\left/ {\vphantom {1 y}} \right. } y}>-1\to \ln y>-1\to y>e^{-1}\to x=y^{1 
\mathord{\left/ {\vphantom {1 y}} \right. } 
y}>e^{-e}$$

那么我们可以说，对于 $e^{-e}\le x<1$ 的范围，不动点是稳定的；而对于 $0<x<e^{-e}$ 的范围，我们将得到具有 2 周期循环的现象，我们试着求解一下这两个值 $y_{1}$ 和 $y_{2}$：

由于 $y_{2}$ ​是序列中紧随 $y_{1}$ ​之后的值，而 $y_{1}$ ​又是序列中紧随 $y_{2}$ ​之后的值，因此我们有 $y_{2} =x^{y_{1} }$ 和 $y_{1} =x^{y_{2} }$。我们对第二个方程两边取 $y_{1}$ ​次幂，得到 $y_{1}^{y_{1} }=x^{y_{2} y_{1} }$。右侧代入 $x^{y_{1} }=y_{2}$ ，则 $y_{1}^{y_{1} }=y_{2}^{y_{2} }$，或者说 $y_{1} \ln y_{1} =y_{2} \ln y_{2}$. 

现在假设 $y_{2}$ 是 $y_{1}$ 的 $p$ 倍，即 $y_{2} =py_{1}$，则：$py_{1} \ln py_{1} =y_{1} \ln y_{1}$，求解得
$$
p\left( {\ln p+\ln y_{1} } \right)=\ln y_{1} \,\,\,\to \,\,\,\left( {p-1} 
\right)\ln y_{1} =-p\ln \left( p \right)\,\,\,\to \,\,\,\ln y_{1} 
=p\frac{\ln p}{1-p}\,\,\,\to \,\,\,\ln y_{1} =\ln \left( {p^{\frac{p}{1-p}}} 
\right)
$$

所以我们有：
$$
	y_{1} =p^{\frac{p}{1-p}}  \quad \text{和} \quad y_{2} =py_{1} 
=p^{\frac{p}{1-p}+1}=p^{\frac{1}{1-p}}.$$

例如，如果我们设 $p=2$，则有 $y_{1} =1 \mathord{\left/ {\vphantom {1 4}} \right. } 4$ 和 $y_{2} =1 \mathord{\left/ {\vphantom {1 2}} \right. } 2$. 也就是说，当 $x=y_{2}^{1 \mathord{\left/ {\vphantom {1 y}} \right. } y_{1} }=y_{1}^{1 \mathord{\left/ {\vphantom {1 y}} \right. } y_{2} }=\left( {1 \mathord{\left/ {\vphantom {1 2}} \right. } 2} \right)^{4}=\left( {1 \mathord{\left/ {\vphantom {1 4}} \right. } 4} \right)^{2}=1 \mathord{\left/ {\vphantom {1 {16=0.0625}}} \right. } {16=0.0625}$ 时，那么就会循环产生 0.25 和 0.5 这两个值。
![[5.gif|300]]

我们还可以找到极端周期（令 $p\to \infty$）中的两个值，其中 $y_{1}$ 和 $y_{2}$ 具有最大间距。

$$y_{1} =\lim\limits_{p\to \infty } p^{\frac{p}{1-p}}\to \infty 
^{-1}=0^{+} \quad \text{和} \quad
y_{2} =\lim\limits_{p\to \infty } p^{\frac{1}{1-p}}=\lim\limits_{p\to 
\infty } e^{\frac{1}{1-p}\ln p}\to e^{0^{-}}=1^{-}
$$

因为 $y_{1} =x^{y_{2} }$，即 $0=x^{1},\,\,\,x\to 0$.

至此，我们基本上对这个幂塔问题进行了比较完整的分析了，是时候总结一下我们的分析成果了。

### 无穷幂塔问题的收敛区间总结


| $x$ 的区间                                                   | 不动点的值                                                               | 不动点数量 | 渐进行为           |
| --------------------------------------------------------- | ------------------------------------------------------------------- | ----- | -------------- |
| $x>e^{1 \mathord{\left/ {\vphantom {1 e}} \right. } e}$   | //                                                                  | 0     | 发散到 $+\infty$  |
| $x=e^{1 \mathord{\left/ {\vphantom {1 e}} \right. } e}$   | $y=e$                                                               | 1     | 收敛到该不动点        |
| $1<x<e^{1 \mathord{\left/ {\vphantom {1 e}} \right. } e}$ | $1<y<e$                                                             | 2     | 收敛到第一个不动点      |
| $x=1$                                                     | $y=1$                                                               | 1     | 瞬时收敛           |
| $e^{-e}<x<1$                                              | $1 \mathord{\left/ {\vphantom {1 e}} \right. } e<y<e$               | 1     | 振荡收敛           |
| $x=e^{-e}$                                                | $y=1 \mathord{\left/ {\vphantom {1 e}} \right.} e$                  | 1     | 振荡收敛           |
| $0<x<e^{-e}$                                              | $0<y_{1} <1 \mathord{\left/ {\vphantom {1 e}} \right. } e<y_{2} <1$ | 1     | 不动点不稳定，循环收敛到两值 |
| $x\to 0^{+}$                                              | $\begin{array}{l}y_{1} \to 0 \\ y_{2} \to 1 \\ \end{array}$         | 1     | 不动点不稳定，循环收敛到两值 |

几个特殊值的近似值：
$$e\approx 2.71828 \quad e^{1/e} \approx 1.44467 \quad  1/e \approx 0.367879 \quad e^{-e}=1 / e^{e} \approx 0.065988 \quad e^{e}\approx 15.15426$$

有趣的是，数字 $e$ 以多种可能的幂形式出现在上表中。

综上所述，我们现在可以得出：无限幂塔在定义域 $e^{-e}\le x\le e^{1 \mathord{\left/ {\vphantom {1 e}} \right. } e}$ 范围内收敛于由方程 $y=x^{y}$ （或表示为 $x=y^{1 \mathord{\left/ {\vphantom {1 y}} \right. } y}$）所定义的函数，其函数值范围满足 $1 \mathord{\left/ {\vphantom {1 e}} \right.} e\le y\le e$。

